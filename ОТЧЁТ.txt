**Сегодняшняя работа (итог):**

Переработана логика жеста на двухфазную схему (`AwaitWindup` ? `AwaitSlap`). Удар теперь зависит исключительно от последовательности действий (сначала свайп вправо, затем влево), скорость жеста не учитывается.

**Основные изменения:**
1.  **Фиксированные пороги в сантиметрах:** Введены новые параметры `swipeDistanceCm` (5 см) и `slapReverseDistanceCm` (0 см). Порог начала замаха (`windupThreshold`) установлен на 0.5.
2.  **Упрощение логики:** Убраны все проверки скорости, жесты отслеживаются только по пройденному расстоянию.
3.  **Защита от повторов:** Добавлен механизм `slapLocked`, предотвращающий множественные срабатывания удара за одно касание.
4.  **Корректное завершение жеста:** После удара активируется режим `returningAfterSlap`, а флаг `swiping` принудительно сбрасывается. Это обеспечивает плавный возврат руки вниз, даже если палец продолжает касаться экрана.
5.  **Улучшенная отладка:** Добавлено логирование сырых смещений (`dxRaw`), состояния замаха (`windupReady`), текущего состояния системы и расчетного DPI в консоль для отладки.
6.  **Синхронизация кода и сцены:** Обновлены значения параметров в инспекторе сцены `SampleScene.unity`, чтобы они соответствовали коду. Устаревшие параметры удалены.

**Текущее поведение:**
- Свайп вправо поднимает руку (замах).
- Отпускание пальца на этой стадии плавно возвращает руку.
- Свайп вправо, а затем влево *без отрыва пальца* — гарантированно вызывает удар (Slap), после чего рука плавно возвращается в исходное положение.

---

**Задачи на следующий раз**

1.  **Дёргание до середины после удара**
    *   **Проблема:** Иногда после выполнения удара (Slap) рука резко дёргается к средней позиции вместо плавного возврата вниз.
    *   **Задача:** Найти источник проблемы (возможные причины: перезапись `Hand_L_Move` во время перехода в анимацию Slap или некорректная синхронизация состояний аниматора) и устранить рывок.

2.  **Удар на любой стадии подъёма**
    *   **Проблема:** Удар должен срабатывать даже при неполном замахе (рука не обязательно поднята до конца).
    *   **Задача:** Настроить логику так, чтобы флаг `windupReady` фиксировался уже при частичном движении вправо, и обратный свайп (влево) в любой момент после этого всегда приводил к удару.
